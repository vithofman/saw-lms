/**
 * Course Edit Page Layout Fix
 *
 * Fixes split-screen layout issue on Course edit page.
 * Ensures Course Details meta box appears BELOW Gutenberg editor,
 * not beside it, with a single scrollbar for the entire page.
 *
 * CRITICAL FIX for v3.2.4: Removes any split-screen layouts.
 *
 * @package    SAW_LMS
 * @subpackage Assets/CSS/Admin
 * @since      3.2.4
 * @version    3.2.4
 */

/* ============================================
   DISABLE GUTENBERG FULL-SCREEN MODE
   ============================================ */

/**
 * Force exit from Gutenberg full-screen mode
 * This ensures meta boxes are visible below editor
 */
body.post-type-saw_course {
	/* Force non-fullscreen mode */
	--wp-admin--admin-bar--height: 32px !important;
}

body.post-type-saw_course.is-fullscreen-mode {
	/* Disable fullscreen mode effects */
	padding-top: var(--wp-admin--admin-bar--height) !important;
}

/* ============================================
   EDITOR AND META BOX LAYOUT
   ============================================ */

/**
 * Ensure normal flow layout (not flex/grid split)
 */
.post-type-saw_course .edit-post-layout__content {
	display: block !important;
	flex-direction: column !important;
}

.post-type-saw_course .edit-post-layout {
	display: block !important;
}

.post-type-saw_course .edit-post-visual-editor {
	flex: 1 1 auto !important;
	max-width: 100% !important;
	width: 100% !important;
}

/**
 * Meta boxes area - ensure it's BELOW editor
 */
.post-type-saw_course #postbox-container-1,
.post-type-saw_course #postbox-container-2 {
	display: block !important;
	width: 100% !important;
	max-width: 100% !important;
	float: none !important;
	position: relative !important;
	margin-top: 20px !important;
}

/**
 * Course Details meta box styling
 */
.post-type-saw_course #saw_lms_course_details {
	clear: both !important;
	display: block !important;
	width: 100% !important;
	margin: 20px 0 !important;
}

/**
 * Normal meta boxes container
 */
.post-type-saw_course #normal-sortables {
	display: block !important;
	width: 100% !important;
	clear: both !important;
}

/* ============================================
   SINGLE SCROLLBAR FOR ENTIRE PAGE
   ============================================ */

/**
 * Remove individual scrollbars from sections
 */
.post-type-saw_course .edit-post-visual-editor__content-area,
.post-type-saw_course .editor-styles-wrapper {
	overflow: visible !important;
	height: auto !important;
	max-height: none !important;
}

.post-type-saw_course #saw_lms_course_details .inside {
	overflow: visible !important;
	max-height: none !important;
}

/**
 * Allow page-level scrolling only
 */
.post-type-saw_course .edit-post-layout__content {
	overflow-y: auto !important;
	height: auto !important;
}

/* ============================================
   RESPONSIVE - MAINTAIN SINGLE COLUMN
   ============================================ */

@media screen and (min-width: 1280px) {
	/* Even on wide screens, keep single column */
	.post-type-saw_course #post-body.columns-2 #postbox-container-1 {
		float: none !important;
		width: 100% !important;
		margin: 20px 0 !important;
	}
	
	.post-type-saw_course #post-body.columns-2 #postbox-container-2 {
		float: none !important;
		width: 100% !important;
		margin-right: 0 !important;
	}
}

/* ============================================
   GUTENBERG BLOCK EDITOR SPECIFIC FIXES
   ============================================ */

/**
 * Disable canvas mode that creates split view
 */
.post-type-saw_course .edit-post-layout.is-mode-visual {
	display: block !important;
}

.post-type-saw_course .interface-interface-skeleton {
	display: block !important;
}

.post-type-saw_course .interface-interface-skeleton__content {
	display: block !important;
	overflow: visible !important;
}

/**
 * Editor canvas - allow natural height
 */
.post-type-saw_course .editor-visual-editor {
	min-height: 400px !important;
	max-height: none !important;
	overflow: visible !important;
}

/* ============================================
   CLASSIC EDITOR FALLBACK
   ============================================ */

/**
 * If Classic Editor plugin is active
 */
.post-type-saw_course.classic-editor #postbox-container-1,
.post-type-saw_course.classic-editor #postbox-container-2 {
	display: block !important;
	width: 100% !important;
	float: none !important;
	margin-top: 20px !important;
}

/* ============================================
   DEBUG HELPER (uncomment to visualize)
   ============================================ */

/* Uncomment to see boundaries:
.post-type-saw_course .edit-post-visual-editor {
	border: 3px solid green !important;
}

.post-type-saw_course #saw_lms_course_details {
	border: 3px solid blue !important;
	background: lightyellow !important;
}

.post-type-saw_course #postbox-container-2 {
	border: 3px solid red !important;
}
*/

/* ============================================
   ACCESSIBILITY & SMOOTH SCROLLING
   ============================================ */

.post-type-saw_course {
	scroll-behavior: smooth !important;
}

/**
 * Focus states for keyboard navigation
 */
.post-type-saw_course .saw-tab-button:focus,
.post-type-saw_course .saw-sub-tab-button:focus {
	outline: 3px solid #2271b1 !important;
	outline-offset: -3px !important;
	z-index: 999 !important;
}